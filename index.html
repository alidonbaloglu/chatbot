<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FEKA Chatbot</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Hidden elements for functionality -->
  <input id="avatarInput" type="file" accept="image/*" hidden />
  <input id="fileInput" type="file" accept=".pdf,.txt,.csv" hidden />
  <input id="adminFileInput" type="file" accept=".pdf,.txt,.csv" multiple hidden />

  <!-- Main Container -->
  <div class="feka-container">
    <!-- Left Sidebar - FEKA Branding -->
    <aside class="feka-sidebar">
      <div class="feka-logo-section">
        <div class="feka-robot-container">
          <img src="assets/Medya.png" alt="FEKA Robot" class="feka-robot-img" />
        </div>
        <h1 class="feka-title">FEKAi</h1>
      </div>
    </aside>

    <!-- Center - Chat Area -->
    <main class="feka-chat-main">
      <div class="feka-chat-header">
        <img src="assets/Medya.png" alt="FEKA Logo" class="feka-header-logo" />
      </div>
      
      <div class="feka-messages-wrapper">
        <div id="messages" class="feka-messages" aria-live="polite"></div>
      </div>

      <div class="feka-input-section">
        <select id="modelSelect" class="feka-model-select" aria-label="Model">
          <option value="gpt-4o-mini" selected>gpt-4o-mini</option>
          <option value="gpt-4o">gpt-4o</option>
        </select>
        <input 
          id="input" 
          class="feka-input" 
          placeholder="MesajÄ±nÄ±zÄ± yazÄ±n..." 
          autocomplete="off" 
        />
        <button id="send" class="feka-send-btn" aria-label="GÃ¶nder">GÃ¶nder</button>
      </div>
      <div id="fileStatus" class="file-status" style="display: none;"></div>
    </main>

    <!-- Right Sidebar - User Profile -->
    <aside class="feka-user-sidebar">
      <div class="feka-user-profile">
        <div class="feka-user-avatar" id="avatar">
          <img id="avatarImg" src="assets/user.png" alt="User Avatar" />
        </div>
        <h2 class="feka-user-name" id="userName">Ali Ã‡elik</h2>
        <div class="feka-user-info">
          <div class="feka-info-item">
            <span class="feka-info-icon">ğŸ’¼</span>
            <div>
              <div class="feka-info-label">Pozisyon</div>
              <div class="feka-info-value" id="userPosition">MÃ¼hendis</div>
            </div>
          </div>
          <div class="feka-info-item">
            <span class="feka-info-icon">ğŸ¢</span>
            <div>
              <div class="feka-info-label">Departman</div>
              <div class="feka-info-value" id="userDepartment">Ar-Ge</div>
            </div>
          </div>
        </div>
        <div class="feka-user-actions">
          <button id="historyBtn" class="feka-action-btn">ğŸ“‹ GeÃ§miÅŸ</button>
          <button id="newChatBtn" class="feka-action-btn">â• Yeni Sohbet</button>
          <button id="fileUploadBtn" class="feka-action-btn">ğŸ“„ Dosya YÃ¼kle</button>
          <button id="logoutBtn" class="feka-action-btn feka-logout-btn">ğŸšª Ã‡Ä±kÄ±ÅŸ</button>
        </div>
      </div>
    </aside>
  </div>

  <!-- History Sidebar (Hidden by default) -->
  <aside id="historySidebar" class="history-sidebar">
    <div id="sidebarTabs" class="sidebar-tabs" style="display: none;">
      <button class="sidebar-tab active" data-tab="history">ğŸ“‹ Sohbetler</button>
      <button class="sidebar-tab" data-tab="admin">ğŸ‘‘ Admin</button>
    </div>
    
    <div id="historySection" class="sidebar-section active">
      <div class="sidebar-header">
        <h3>GeÃ§miÅŸ Sohbetler</h3>
        <button id="closeHistoryBtn" class="close-btn">âœ•</button>
      </div>
      <div id="historyList" class="history-list"></div>
    </div>
    
    <div id="adminSection" class="sidebar-section" style="display: none;">
      <div class="sidebar-header">
        <h3>ğŸ‘‘ Admin Paneli</h3>
        <button id="closeAdminBtn" class="close-btn">âœ•</button>
      </div>
      <div class="admin-panel-content">
        <div class="admin-section">
          <h4>ğŸ“ Kaynak YÃ¼kleme</h4>
          <button id="adminFileUploadBtn" class="admin-button-primary">Dosya SeÃ§ ve YÃ¼kle</button>
          <p id="adminFileStatus" class="admin-info" style="margin-top: 8px;"></p>
        </div>
        <div class="admin-section">
          <h4>ğŸ“š YÃ¼klenen Kaynaklar</h4>
          <div id="uploadedSourcesList" class="uploaded-sources-list">
            <div class="no-sources">HenÃ¼z kaynak yÃ¼klenmedi</div>
          </div>
        </div>
        <div class="admin-section">
          <h4>ğŸ“Š Ä°statistikler</h4>
          <div id="statsContainer" class="stats-grid">
            <div class="stat-box">
              <div class="stat-value" id="totalChatsCount">0</div>
              <div class="stat-label">Toplam Sohbet</div>
            </div>
            <div class="stat-box">
              <div class="stat-value" id="totalUsersCount">0</div>
              <div class="stat-label">Aktif KullanÄ±cÄ±</div>
            </div>
            <div class="stat-box">
              <div class="stat-value" id="totalMessagesCount">0</div>
              <div class="stat-label">Toplam Mesaj</div>
            </div>
            <div class="stat-box">
              <div class="stat-value" id="uploadedFilesCount">0</div>
              <div class="stat-label">YÃ¼klÃ¼ Dosya</div>
            </div>
          </div>
        </div>
        <div class="admin-section">
          <h4>ğŸ’¬ TÃ¼m KullanÄ±cÄ± Sohbetleri</h4>
          <div id="allChatsContainer" class="all-chats-list"></div>
        </div>
        <button id="refreshAdminBtn" class="admin-button">ğŸ”„ Verileri Yenile</button>
      </div>
    </div>
  </aside>

  <!-- Hidden elements for backward compatibility -->
  <div style="display:none;">
    <div id="greeting"></div>
    <div id="heroLogo"></div>
    <div id="userInfo"></div>
    <select id="modelSelect">
      <option value="gpt-4o-mini" selected>gpt-4o-mini</option>
      <option value="gpt-4o">gpt-4o</option>
    </select>
  </div>

  <!-- Custom Confirm Modal -->
  <div id="confirmModal" class="feka-modal" style="display:none;">
    <div class="feka-modal-overlay"></div>
    <div class="feka-modal-content feka-modal-confirm">
      <div class="feka-modal-header">
        <h3 id="confirmModalTitle">Onay</h3>
        <button id="closeConfirmModalBtn" class="feka-modal-close">âœ•</button>
      </div>
      <div class="feka-modal-body">
        <p id="confirmModalMessage" class="feka-confirm-message">Emin misiniz?</p>
        <div class="feka-modal-actions">
            <button id="confirmCancelBtn" class="feka-btn-secondary">Ä°ptal</button>
            <button id="confirmOkBtn" class="feka-btn-danger">Evet</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
